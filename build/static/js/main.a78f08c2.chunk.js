(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){e.exports=n(325)},144:function(e,t,n){},325:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(56),i=n.n(r),c=(n(144),n(15)),l=n(16),o=n(18),u=n(17),h=n(19),m=n(78),d=n.n(m),p=n(138),f=n.n(p),v=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"Home"))}}]),t}(a.Component),E=n(8),b=n.n(E),k=n(32),g=n(21),y=n(33),w=n.n(y),j=n(10),O=new w.a({apiKey:"keyUUvmGjuF42I8ER"}).base("appzkqyW5hg6lXcui"),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={isFetching:!1,persons:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h2",null,"Person"),s.a.createElement("ul",null,this.state.persons.map(function(t){return s.a.createElement("li",{key:t.id},s.a.createElement("input",{type:"checkbox",defaultChecked:t.fields.Signed,onChange:function(){return e.handleChange(t.id)}}),s.a.createElement(j.b,{to:"/person/"+t.id},t.fields.Name))})),s.a.createElement("p",null,this.state.isFetching?"Fetching persons...":""))}},{key:"componentDidMount",value:function(){this.fetchPersons()}},{key:"componentWillUnmount",value:function(){}},{key:"handleChange",value:function(e){var t=this;this.setState(function(n){return{persons:n.persons.map(function(n){return n.id===e&&(n.fields.Signed=!n.fields.Signed,t.updatePerson(e,n.fields.Signed)),n})}})}},{key:"fetchPersons",value:function(){var e=Object(g.a)(b.a.mark(function e(){var t=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{this.setState({isFetching:!0}),O("Person").select({view:"Grid view"}).eachPage(function(e,n){t.setState({isFetching:!1,persons:e}),n()})}catch(n){this.setState(Object(k.a)({},this.state,{isFetching:!1}))}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updatePerson",value:function(e,t){O("Person").update(e,{Signed:t},function(e,t){e&&console.error(e)})}}]),t}(a.Component),F=n(38),P=n.n(F),x=n(39),C=n.n(x),N=n(40),A=n.n(N),I=n(30),U=n.n(I),W=new w.a({apiKey:"keyUUvmGjuF42I8ER"}).base("appzkqyW5hg6lXcui"),D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).fetchSessions=n.fetchSessionsAsync,n.state={isFetching:!1,sessions:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(P.a,null,s.a.createElement(C.a,null,s.a.createElement(A.a,null,s.a.createElement("h2",null,"Sessions"),s.a.createElement(U.a,null,this.state.sessions.map(function(e){return s.a.createElement(U.a.Item,{key:e.id},s.a.createElement(j.b,{to:"/session/"+e.id},e.fields.Name))})),s.a.createElement("p",null,this.state.isFetching?"Fetching sessions...":""))))}},{key:"componentDidMount",value:function(){this.fetchSessions()}},{key:"componentWillUnmount",value:function(){}},{key:"fetchSessionsAsync",value:function(){var e=Object(g.a)(b.a.mark(function e(){var t=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{this.setState({isFetching:!0}),W("Session").select({view:"Grid view"}).eachPage(function(e,n){t.setState({isFetching:!1,sessions:e}),n()})}catch(n){console.log(n),this.setState(Object(k.a)({},this.state,{isFetching:!1}))}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component),G=n(57),L=n(136),z=n.n(L),B=n(34),H=n.n(B),R=n(137),V=n.n(R),q=new w.a({apiKey:"keyUUvmGjuF42I8ER"}).base("appzkqyW5hg6lXcui"),K=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).inputValue="",n.changeInputHandler=function(e){n.inputValue=e.target.value,n.setState({newPerson:n.inputValue})},n.handleClick=function(e){n.createPerson(n.inputValue),n.setState({newPerson:""}),n.loadData()},n.state={isFetching:!1,session:null,persons:[],newPerson:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchSession(this.props.match.params.id);case 2:return e.next=4,this.fetchPersons();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this,a=this.state.session,r=this.state.persons;return null!=a&&(e=s.a.createElement(P.a,null,s.a.createElement(C.a,null,s.a.createElement(A.a,null,s.a.createElement("br",null),s.a.createElement(H.a,null,s.a.createElement(H.a.Body,null,s.a.createElement(H.a.Title,null,a.fields.Name),s.a.createElement(H.a.Subtitle,{className:"mb-2 text-muted"},s.a.createElement(z.a,{format:"LLLL"},a.fields.Start)),s.a.createElement(H.a.Text,null,a.fields.Notes))))))),null!=a&&r.length>0&&(t=s.a.createElement(P.a,null,s.a.createElement(C.a,null,s.a.createElement(A.a,null,s.a.createElement("br",null),s.a.createElement(U.a,null,r.map(function(e){return s.a.createElement(U.a.Item,{key:e.id},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",defaultChecked:null!=a&&null!=a.fields.Attended&&a.fields.Attended.includes(e.id),onChange:function(){return n.handleChange(e.id,n.checked)}}),"\xa0",e.fields.Name))}),s.a.createElement(U.a.Item,null,s.a.createElement("input",{value:this.state.newPerson,onChange:this.changeInputHandler,placeholder:"New person..."}),s.a.createElement(V.a,{variant:"primary",size:"sm",onClick:this.handleClick},"Add"))))))),s.a.createElement("div",null,s.a.createElement("div",null,e),s.a.createElement("div",null,t),s.a.createElement("p",null,this.state.isFetching?"Fetching data...":""))}},{key:"fetchSession",value:function(){var e=Object(g.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,q("Session").find(t,function(e,t){e?console.error(e):n.setState({isFetching:!1,session:t})});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPersons",value:function(){var e=Object(g.a)(b.a.mark(function e(){var t=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({isFetching:!0}),e.next=4,q("Person").select({sort:[{field:"Name",direction:"asc"}],view:"Grid view"}).eachPage(function(e,n){t.setState({isFetching:!1,persons:e}),n()});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.setState(Object(k.a)({},this.state,{isFetching:!1}));case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e,t){var n=this.state.session,a=[];null!=n.fields.Attended&&(a=n.fields.Attended);var s=a.indexOf(e);s>=0?a.splice(s,1):a=a.concat(e),n.fields.Attended=a,this.setState(Object(G.a)({},n,n)),this.updateSession(n.id,a)}},{key:"createPerson",value:function(e){q("Person").create({Name:e},function(e,t){e&&console.error(e)})}},{key:"updateSession",value:function(e,t){q("Session").update(e,{Attended:t},function(e,t){e&&console.error(e)})}}]),t}(a.Component),M=n(29),X=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(j.a,null,s.a.createElement("div",null,s.a.createElement(d.a,{bg:"dark",variant:"dark"},s.a.createElement(d.a.Brand,{href:"#home"},s.a.createElement("img",{alt:"",src:"/logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," RE:PLAY"),s.a.createElement(f.a,{className:"mr-auto"},s.a.createElement(j.b,{to:"/",className:"nav-link"}," Home "),s.a.createElement(j.b,{to:"/persons",className:"nav-link"},"Persons"),s.a.createElement(j.b,{to:"/sessions",className:"nav-link"},"Sessions"))),s.a.createElement(M.c,null,s.a.createElement(M.a,{exact:!0,path:"/",component:v}),s.a.createElement(M.a,{path:"/persons",component:S}),s.a.createElement(M.a,{path:"/sessions",component:D}),s.a.createElement(M.a,{path:"/session/:id",component:K}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(321),n(322);i.a.render(s.a.createElement(j.a,null,s.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[139,1,2]]]);
//# sourceMappingURL=main.a78f08c2.chunk.js.map